!function(){var e=window.sensei.courseVideoSettings,n=e.courseVideoRequired,o=e.courseVideoAutoComplete,t=e.courseVideoAutoPause,i=function(e){return e.preventDefault(),!1},d=function(){document.querySelectorAll('[data-id="complete-lesson-button"]').forEach((function(e){e.removeEventListener("click",i),e.disabled=!1}))},c=function(){var e=document.querySelector('[data-id="complete-lesson-button"]');e&&setTimeout((function(){e.click()}),3e3)},u=function(e){var t=e.data;n&&t===YT.PlayerState.ENDED&&d(),o&&t===YT.PlayerState.ENDED&&c()},a=function(e){var n=new YT.Player(e,{events:{onStateChange:u}});t&&void 0!==document.hidden&&document.addEventListener("visibilitychange",(function(){document.hidden&&"function"==typeof n.pauseVideo&&n.pauseVideo()}),!1)},r=void 0!==window.onYouTubeIframeAPIReady?window.onYouTubeIframeAPIReady:function(){};window.onYouTubeIframeAPIReady=function(){document.querySelectorAll(".sensei-course-video-container.youtube-extension iframe").forEach(a),r()};var s=function(){n&&d(),o&&c()};document.querySelectorAll(".sensei-course-video-container video").forEach((function(e){e.addEventListener("ended",s),t&&void 0!==document.hidden&&document.addEventListener("visibilitychange",(function(){document.hidden&&"function"==typeof e.pause&&e.pause()}),!1)})),document.querySelectorAll(".sensei-course-video-container.vimeo-extension iframe").forEach((function(e){var n=new Vimeo.Player(e);n.on("ended",s),t&&void 0!==document.hidden&&document.addEventListener("visibilitychange",(function(){document.hidden&&"function"==typeof n.pause&&n.pause()}),!1)})),document.querySelectorAll(".sensei-course-video-container.videopress-extension iframe").forEach((function(e){var n,o,i=(n=e.src,(o=n.split("?")[0].split("/"))[o.length-1]);e.addEventListener("load",(function(){window.addEventListener("message",(function(n){n.source===e.contentWindow&&"ended"===n.data.event&&n.data.id===i&&s()}),!1),t&&void 0!==document.hidden&&document.addEventListener("visibilitychange",(function(){document.hidden&&e.contentWindow.postMessage({event:"videopress_action_pause"},"*")}),!1)}))})),n&&document.querySelectorAll('[data-id="complete-lesson-button"]').forEach((function(e){e.disabled=!0,e.addEventListener("click",i)}))}();