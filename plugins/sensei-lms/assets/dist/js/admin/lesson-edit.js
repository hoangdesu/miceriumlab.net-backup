(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.domReady;var o=e.n(t);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var o=[],_n=!0,n=!1,r=void 0;try{for(var s,i=e[Symbol.iterator]();!(_n=(s=i.next()).done)&&(o.push(s.value),!t||o.length!==t);_n=!0);}catch(c){n=!0,r=c}finally{try{_n||null==i.return||i.return()}finally{if(n)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const l=window.wp.data,u=window.wp.i18n;const a=function(e){var t=e.subscribeListener,o=void 0===t?function(){}:t,n=e.onSetDirty,r=void 0===n?function(){}:n,s=e.onSaveStart,i=void 0===s?function(){}:s,c=e.onSave,u=void 0===c?function(){}:c,a=(0,l.select)("core/editor"),d=!1,b=!1;return(0,l.subscribe)((function(){o();var e=a.isEditedPostDirty(),t=a.isSavingPost()&&!a.isAutosavingPost();!b&&e?(b=!0,r()):b=e,d&&!t?(d=t,u()):!d&&t?(d=t,i()):d=t}))};var __=u.__,d={course:{outline:"sensei-lms/course-outline",takeCourse:"sensei-lms/button-take-course",contactTeacher:"sensei-lms/button-contact-teacher",courseProgress:"sensei-lms/course-progress",viewResults:"sensei-lms/button-view-results"},lesson:{lessonActions:"sensei-lms/lesson-actions",lessonProperties:"sensei-lms/lesson-properties",contactTeacher:"sensei-lms/button-contact-teacher"}},b={course:{"meta-box-course-lessons":[d.course.outline],"meta-box-module_course_mb":[d.course.outline],"meta-box-course-video":Object.values(d.course)},lesson:{"meta-box-lesson-info":[d.lesson.lessonProperties]}},p=(0,l.select)("core/block-editor"),f=(0,l.select)("core/editor"),v=(0,l.select)("core/edit-post"),m=(0,l.dispatch)("core/edit-post");o()((function(){!function(e){if(p){var t,o,n,r=(0,l.dispatch)("core/notices"),i=r.createWarningNotice,u=r.removeNotice;a({subscribeListener:function(){var e=p.getBlocks();e!==n&&(n=e,g(),o=y(),void 0!==t&&h())},onSetDirty:function(){var e;f.isEditedPostDirty()&&void 0===t&&(t=(null===(e=f.getCurrentPostAttribute("meta"))||void 0===e?void 0:e._needs_template)||o)},onSave:function(){t=y(),h()}});var y=function(){return w(Object.values(d[e]))},g=function(){Object.entries(b[e]).forEach((function(e){var t=c(e,2),o=t[0],n=t[1];!w(n)!==v.isEditorPanelEnabled(o)&&m.toggleEditorPanelEnabled(o)})),document.querySelectorAll("#module_course_mb input").forEach((function(e){e.disabled=!v.isEditorPanelEnabled("meta-box-module_course_mb")})),document.querySelectorAll("#lesson-info input, #lesson-info select").forEach((function(e){e.disabled=!v.isEditorPanelEnabled("meta-box-lesson-info")}))},h=function(){var e=y(),o={isDismissible:!0,actions:[{label:__("Learn more","sensei-lms"),url:"https://senseilms.com/documentation/course-page-blocks/"}]};if(e)if(u("sensei-using-template"),t)u("sensei-using-blocks");else{var n=__("You've just added your first Sensei block. This will change how your course page appears. Be sure to preview your page before saving changes.","sensei-lms");i(n,s({id:"sensei-using-blocks"},o))}else if(u("sensei-using-blocks"),t){var r=__("Are you sure you want to remove all Sensei blocks? This will change how your course page appears. Be sure to preview your page before saving changes.","sensei-lms");i(r,s({id:"sensei-using-template"},o))}else u("sensei-using-template")},w=function(e){return e.some((function(e){return p.getGlobalBlockCount(e)>0}))}}}("lesson");var e=jQuery("#lesson-complexity-options");e.length>0&&e.select2({width:"resolve"});var t=jQuery("#lesson-prerequisite-options");t.length>0&&t.select2({width:"resolve"});var o=jQuery("#lesson-course-options");o.length>0&&o.select2({width:"resolve"});var n=jQuery("#lesson-module-options");n.length>0&&n.select2({width:"resolve"}),jQuery("#lesson-course-options").on("change",(function(){var e,t=(null===(e=wp.data.select("core/editor"))||void 0===e?void 0:e.getCurrentPostId())||jQuery("#post_ID").val(),o=jQuery(this).val();jQuery.get(ajaxurl,{action:"get_prerequisite_meta_box_content",lesson_id:t,course_id:o,security:window.sensei_lesson_metadata.get_prerequisite_meta_box_content_nonce},(function(e){""!==e&&(jQuery("> .inside","#lesson-prerequisite").html(e),jQuery("#lesson-prerequisite-options").select2({width:"resolve"}))}))}))}))})();